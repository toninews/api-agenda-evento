<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>API Agenda Evento</title>
    <style>
      :root {
        --bg: #f3efe5;
        --panel: rgba(255, 252, 245, 0.78);
        --ink: #1f2a2a;
        --muted: #5f6b6b;
        --line: rgba(31, 42, 42, 0.12);
        --brand: #b64d2d;
        --brand-dark: #87331b;
        --accent: #1d6b64;
        --shadow: 0 24px 80px rgba(31, 42, 42, 0.12);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: Georgia, "Times New Roman", serif;
        color: var(--ink);
        background:
          radial-gradient(
            circle at top left,
            rgba(182, 77, 45, 0.22),
            transparent 34%
          ),
          radial-gradient(
            circle at bottom right,
            rgba(29, 107, 100, 0.18),
            transparent 30%
          ),
          linear-gradient(135deg, #efe4cd 0%, #f5f2ea 52%, #dde7e4 100%);
      }

      .shell {
        width: min(1100px, calc(100% - 32px));
        margin: 32px auto;
        padding: 32px;
        border: 1px solid var(--line);
        border-radius: 28px;
        background: var(--panel);
        box-shadow: var(--shadow);
        backdrop-filter: blur(14px);
      }

      .eyebrow {
        display: inline-block;
        padding: 8px 14px;
        border-radius: 999px;
        background: rgba(182, 77, 45, 0.1);
        color: var(--brand-dark);
        font-size: 0.82rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      h1 {
        margin: 18px 0 16px;
        max-width: 11ch;
        font-size: clamp(3rem, 8vw, 5.8rem);
        line-height: 0.92;
        font-weight: 700;
      }

      .lead {
        max-width: 640px;
        margin: 0 0 28px;
        font-size: 1.08rem;
        line-height: 1.7;
        color: var(--muted);
      }

      .cta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 32px;
      }

      .cta {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 14px 18px;
        border: 1px solid transparent;
        border-radius: 14px;
        color: #fffdf8;
        background: var(--brand);
        text-decoration: none;
        font-weight: 600;
      }

      .cta.secondary {
        color: var(--ink);
        background: transparent;
        border-color: var(--line);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
        margin-top: 22px;
      }

      .card {
        padding: 22px;
        border: 1px solid var(--line);
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.58);
      }

      .card h2 {
        margin: 0 0 10px;
        font-size: 1.1rem;
      }

      .card p {
        margin: 0;
        color: var(--muted);
        line-height: 1.6;
      }

      .meta {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 16px;
        margin-top: 16px;
      }

      .meta-block {
        padding: 22px;
        border-radius: 20px;
        background: #1f2a2a;
        color: #f3efe5;
      }

      .meta-block strong {
        display: block;
        margin-bottom: 10px;
        font-size: 0.82rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: rgba(243, 239, 229, 0.66);
      }

      .meta-block code {
        font-size: 0.96rem;
        color: #f7c56d;
      }

      .meta-block.accent {
        background: var(--accent);
      }

      .footer-note {
        margin-top: 28px;
        padding-top: 20px;
        border-top: 1px solid var(--line);
        color: var(--muted);
        line-height: 1.6;
      }

      .layout {
        display: grid;
        grid-template-columns: 1.1fr 0.9fr;
        gap: 20px;
        margin-top: 24px;
      }

      .panel {
        padding: 24px;
        border: 1px solid var(--line);
        border-radius: 22px;
        background: rgba(255, 255, 255, 0.62);
      }

      .panel h2 {
        margin: 0 0 8px;
        font-size: 1.35rem;
      }

      .panel-intro {
        margin: 0 0 18px;
        color: var(--muted);
        line-height: 1.6;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 14px;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .field.full {
        grid-column: 1 / -1;
      }

      .field label {
        font-size: 0.88rem;
        font-weight: 700;
        letter-spacing: 0.03em;
      }

      .field input,
      .field textarea {
        width: 100%;
        padding: 12px 14px;
        border: 1px solid rgba(31, 42, 42, 0.16);
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.88);
        color: var(--ink);
        font: inherit;
      }

      .field textarea {
        resize: vertical;
        min-height: 110px;
      }

      .hint,
      .errorlist {
        margin: 0;
        font-size: 0.86rem;
        line-height: 1.5;
      }

      .hint {
        color: var(--muted);
      }

      .errorlist {
        padding: 0;
        color: #a33620;
        list-style: none;
      }

      .submit-row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-top: 18px;
      }

      .submit-row button {
        padding: 14px 18px;
        border: 0;
        border-radius: 14px;
        background: var(--accent);
        color: #fff;
        font: inherit;
        font-weight: 700;
        cursor: pointer;
      }

      .alert {
        margin-bottom: 16px;
        padding: 14px 16px;
        border-radius: 14px;
        background: rgba(29, 107, 100, 0.12);
        color: #15524d;
        font-weight: 600;
      }

      .alert.delete {
        background: rgba(179, 70, 48, 0.12);
        color: #8d321d;
      }

      .alert.edit {
        background: rgba(29, 107, 100, 0.12);
        color: #15524d;
      }

      .event-list {
        display: grid;
        gap: 12px;
      }

      .event-item {
        padding: 16px;
        border-radius: 18px;
        background: #f9f5eb;
        border: 1px solid rgba(31, 42, 42, 0.1);
      }

      .event-item h3 {
        margin: 0 0 8px;
        font-size: 1.06rem;
      }

      .event-top {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 8px;
      }

      .delete-form {
        margin: 0;
      }

      .delete-button,
      .edit-button {
        min-width: 34px;
        height: 34px;
        padding: 0 12px;
        border: 0;
        border-radius: 999px;
        background: rgba(182, 77, 45, 0.14);
        color: var(--brand-dark);
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
      }

      .edit-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: rgba(29, 107, 100, 0.14);
        color: var(--accent);
        text-decoration: none;
      }

      .event-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .event-item p {
        margin: 0;
        color: var(--muted);
        line-height: 1.55;
      }

      .empty {
        margin: 0;
        color: var(--muted);
        line-height: 1.6;
      }

      @media (max-width: 640px) {
        .shell {
          margin: 16px auto;
          padding: 22px;
          border-radius: 22px;
        }

        h1 {
          max-width: none;
        }
      }

      @media (max-width: 900px) {
        .layout {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 640px) {
        .form-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <main class="shell">
      <span class="eyebrow">Django REST API</span>
      <h1>Agenda de eventos, sem rodeio.</h1>
      <p class="lead">
        Projeto em Python com Django e PostgreSQL para cadastrar, listar, editar
        e remover eventos. A aplicacao expõe uma API REST e uma documentacao
        navegavel para facilitar testes e deploy.
      </p>

      <div class="cta-row">
        <a class="cta" href="/api/v1/eventos/">Abrir API</a>
        <a class="cta secondary" href="/swagger/">Ver Swagger</a>
      </div>

      <section class="grid">
        <article class="card">
          <h2>CRUD de eventos</h2>
          <p>
            Endpoint principal em <code>/api/v1/eventos/</code> com operacoes de
            criacao, consulta, edicao e remocao.
          </p>
        </article>
        <article class="card">
          <h2>Banco PostgreSQL</h2>
          <p>
            O modelo usa <code>ArrayField</code>, entao o projeto depende de
            PostgreSQL e nao deve usar sqlite em producao.
          </p>
        </article>
        <article class="card">
          <h2>Documentacao</h2>
          <p>
            A interface Swagger permite explorar o schema, validar payloads e
            testar as rotas diretamente no navegador.
          </p>
        </article>
      </section>

      <section class="meta">
        <div class="meta-block">
          <strong>Request de exemplo</strong>
          <code>GET /api/v1/eventos/</code>
        </div>
        <div class="meta-block accent">
          <strong>Stack</strong>
          <code>Django 4.1 + DRF + PostgreSQL</code>
        </div>
      </section>

      <section class="layout" id="painel-eventos">
        <article class="panel">
          <h2>{% if evento_edicao %}Editar evento{% else %}Cadastrar evento{% endif %}</h2>
          <p class="panel-intro">
            Formulario proprio da aplicacao para criar e editar eventos sem depender
            da interface automatica do DRF.
          </p>

          {% if success %}
          <div class="alert">Evento criado com sucesso.</div>
          {% endif %} {% if deleted %}
          <div class="alert delete">Evento removido com sucesso.</div>
          {% endif %} {% if edited %}
          <div class="alert edit">Evento atualizado com sucesso.</div>
          {% endif %}

          <form method="post">
            {% csrf_token %} {% if form.non_field_errors %} {{
            form.non_field_errors }} {% endif %}
            {% if evento_edicao %}
            <input type="hidden" name="evento_id" value="{{ evento_edicao.id }}" />
            {% endif %}

            <div class="form-grid">
              <div class="field">
                <label for="{{ form.titulo.id_for_label }}">Titulo</label>
                {{ form.titulo }} {{ form.titulo.errors }}
              </div>
              <div class="field">
                <label for="{{ form.data.id_for_label }}">Data</label>
                {{ form.data }} {{ form.data.errors }}
              </div>
              <div class="field">
                <label for="{{ form.horario_inicio.id_for_label }}"
                  >Horario de inicio</label
                >
                {{ form.horario_inicio }} {{ form.horario_inicio.errors }}
              </div>
              <div class="field">
                <label for="{{ form.horario_fim.id_for_label }}"
                  >Horario de fim</label
                >
                {{ form.horario_fim }} {{ form.horario_fim.errors }}
              </div>
              <div class="field full">
                <label for="{{ form.convidados.id_for_label }}"
                  >Convidados</label
                >
                {{ form.convidados }}
                <p class="hint">{{ form.convidados.help_text }}</p>
                {{ form.convidados.errors }}
              </div>
              <div class="field full">
                <label for="{{ form.local.id_for_label }}">Local</label>
                {{ form.local }} {{ form.local.errors }}
              </div>
              <div class="field full">
                <label for="{{ form.descricao.id_for_label }}">Descricao</label>
                {{ form.descricao }} {{ form.descricao.errors }}
              </div>
            </div>

            <div class="submit-row">
              <button type="submit">
                {% if evento_edicao %}Salvar alteracoes{% else %}Criar evento{% endif %}
              </button>
              {% if evento_edicao %}
              <a class="cta secondary" href="/#painel-eventos">Cancelar</a>
              {% endif %}
            </div>
          </form>
        </article>

        <aside class="panel">
          <h2>Ultimos eventos</h2>
          <p class="panel-intro">
            Visualizacao rapida dos registros mais recentes salvos no banco.
          </p>

          {% if eventos %}
          <div class="event-list">
            {% for evento in eventos %}
            <article class="event-item">
              <div class="event-top">
                <h3>{{ evento.titulo }}</h3>
                <div class="event-actions">
                  <a class="edit-button" href="/?edit={{ evento.id }}#painel-eventos" title="Editar evento">Editar</a>
                  <form
                    class="delete-form"
                    method="post"
                    onsubmit="return confirm('Excluir este evento?');"
                  >
                    {% csrf_token %}
                    <input type="hidden" name="action" value="delete" />
                    <input
                      type="hidden"
                      name="evento_id"
                      value="{{ evento.id }}"
                    />
                    <button
                      class="delete-button"
                      type="submit"
                      title="Excluir evento"
                    >
                      Excluir
                    </button>
                  </form>
                </div>
              </div>
              <p>{{ evento.data }} · {{ evento.horario_inicio }} - {{ evento.horario_fim }}</p>
              <p>{{ evento.local }}</p>
              <p>Convidados: {{ evento.convidados|join:", " }}</p>
            </article>
            {% endfor %}
          </div>
          {% else %}
          <p class="empty">Nenhum evento cadastrado ainda.</p>
          {% endif %}
        </aside>
      </section>
    </main>
  </body>
</html>
